<Window x:Class="NC.SalaryCalculator.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:local="clr-namespace:NC.SalaryCalculator"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:tb="http://www.hardcodet.net/taskbar"
        xmlns:vc="clr-namespace:NC.SalaryCalculator.ValueConverters"
        Title="搞钱￥_￥~"
        Width="450"
        Height="350"
        Background="{StaticResource CustomColorZoneStyle}"
        FontFamily="-apple-system, BlinkMacSystemFont, Segoe UI, PingFang SC, Hiragino Sans GB, Microsoft YaHei, Helvetica Neue, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol"
        FontSize="15"
        Foreground="White"
        Icon="/favicon.ico"
        ResizeMode="NoResize"
        Topmost="True"
        WindowStartupLocation="Manual"
        WindowStyle="None"
        mc:Ignorable="d">

    <Window.Resources>
        <vc:IntValueConverter x:Key="intValueConverter" />
        <vc:FloatValueConverter x:Key="floatValueConverter" />
        <vc:DateTimeValueConverter x:Key="dateTimeValueConverter" />
    </Window.Resources>

    <Grid>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="30" />
                <RowDefinition Height="*" />
                <RowDefinition Height="30" />
            </Grid.RowDefinitions>

            <tb:TaskbarIcon IconSource="favicon.ico" ToolTipText="搞钱￥_￥~" TrayMouseDoubleClick="TaskbarIcon_TrayMouseDoubleClick" Visibility="Visible" />

            <!--  标题栏  -->
            <Grid x:Name="titleBar" Background="Transparent" Cursor="Hand">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <StackPanel HorizontalAlignment="Left" VerticalAlignment="Center">
                    <!--<Button Width="30"
                        Height="30"
                        Foreground="White"
                        Style="{StaticResource MaterialDesignIconButton}"
                        ToolTip="Settings">
                    <materialDesign:PackIcon Kind="Settings" />
                </Button>-->
                    <!--<Image Width="25" Source="/assets/logo.png" />-->
                    <TextBlock FontSize="20" FontWeight="Bold" Foreground="White" Text=" ￥" />
                </StackPanel>

                <!--  窗口操作  -->
                <StackPanel Grid.Column="1" Margin="5,0" HorizontalAlignment="Right" Orientation="Horizontal">
                    <Button Width="20"
                            Height="20"
                            Command="{Binding OpenSettingCommand}"
                            Foreground="White"
                            Style="{StaticResource MaterialDesignIconButton}"
                            ToolTip="Settings">
                        <materialDesign:PackIcon Width="20" Height="20" Kind="Settings" />
                    </Button>
                    <Button x:Name="btnMinus"
                            Width="20"
                            Height="20"
                            Margin="5,0"
                            Foreground="White"
                            Style="{StaticResource MaterialDesignIconButton}"
                            ToolTip="偷偷搞钱">
                        <materialDesign:PackIcon Width="20" Height="20" Kind="Minus" />
                    </Button>
                    <!--<Button x:Name="btnMaximize"
                        Width="26"
                        Height="26"
                        Margin="5,0"
                        Padding="0"
                        Foreground="White"
                        Style="{StaticResource MaterialDesignIconButton}">
                    <materialDesign:PackIcon Width="26" Height="26" Kind="CheckboxBlankOutline" />
                </Button>-->
                    <Button x:Name="btnClose"
                            Width="20"
                            Height="20"
                            Foreground="White"
                            Style="{StaticResource MaterialDesignIconButton}"
                            ToolTip="挣够了！挣够了！">
                        <materialDesign:PackIcon Width="20" Height="20" Kind="Close" />
                    </Button>

                </StackPanel>
            </Grid>

            <!--  主页内容  -->
            <Grid Grid.Row="1" d:Visibility="Visible" Visibility="{Binding HomeVisibility}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="30" />
                    <RowDefinition Height="40" />
                    <RowDefinition Height="100" />
                    <RowDefinition Height="70" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <!--  老板，给钱 ~~~  -->
                <StackPanel Grid.ColumnSpan="3" HorizontalAlignment="Center" VerticalAlignment="Center" Orientation="Horizontal">
                    <materialDesign:PackIcon Width="30" Height="30" Kind="HandExtended" />
                    <TextBlock VerticalAlignment="Center" FontWeight="Bold" Text="老板，给钱 ~~~" />
                </StackPanel>

                <!--  实时收入  -->
                <StackPanel Grid.Row="1"
                            Grid.ColumnSpan="3"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Orientation="Horizontal">
                    <TextBlock Margin="0,10,0,0"
                               VerticalAlignment="Center"
                               FontSize="16"
                               FontWeight="Bold"
                               Text="￥" />
                    <TextBlock VerticalAlignment="Center"
                               d:Text="888.88"
                               FontSize="36"
                               FontWeight="Bold"
                               Text="{Binding TodayTotalIncome, StringFormat={}{0:F2}}" />
                </StackPanel>

                <!--  实时统计  -->
                <UniformGrid Grid.Row="2"
                             Grid.ColumnSpan="3"
                             Height="80"
                             HorizontalAlignment="Stretch"
                             Columns="3">
                    <Border Margin="5" Background="{StaticResource PrimaryLightBrush}" CornerRadius="10">
                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock d:Text="00.00" FontSize="16" FontWeight="Bold" Text="{Binding SalaryPerSecond, StringFormat={}{0:F2}}" />
                            <TextBlock Text="每秒(￥)" />
                        </StackPanel>
                    </Border>
                    <Border Margin="5" Background="{StaticResource PrimaryLightBrush}" CornerRadius="10">
                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock d:Text="00.00" FontSize="16" FontWeight="Bold" Text="{Binding SalaryPerMinute, StringFormat={}{0:F2}}" />
                            <TextBlock Text="每分钟(￥)" />
                        </StackPanel>
                    </Border>
                    <Border Margin="5" Background="{StaticResource PrimaryLightBrush}" CornerRadius="10">
                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock d:Text="00.00" FontSize="16" FontWeight="Bold" Text="{Binding SalaryPerHour, StringFormat={}{0:F2}}" />
                            <TextBlock Text="每小时(￥)" />
                        </StackPanel>
                    </Border>
                </UniformGrid>

                <!--  今日进度  -->
                <StackPanel Grid.Row="3" Grid.ColumnSpan="3" Margin="10,0">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock FontWeight="Bold" Text="今日小目标 ￥" />
                        <TextBlock d:Text="888.88" FontWeight="Bold" Text="{Binding TodayTargetIncome, StringFormat={}{0:F2}}" />
                    </StackPanel>
                    <Grid>
                        <ProgressBar x:Name="MyProgressBar"
                                     Height="15"
                                     Margin="0,5"
                                     d:Value="88.88"
                                     Value="{Binding TargetAchievementRate}" />
                        <TextBlock HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   FontSize="13"
                                   FontWeight="Bold"
                                   Text="{Binding ElementName=MyProgressBar, Path=Value, StringFormat={}{0:F2}%}" />
                    </Grid>
                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock d:Text="恭喜发财，时薪到手！💰" Foreground="Red" Text="{Binding IncomeMilestoneMessage}" />
                    </StackPanel>
                </StackPanel>

                <!--  按钮  -->
                <StackPanel Grid.Row="4" Grid.ColumnSpan="3" HorizontalAlignment="Center" Orientation="Horizontal">
                    <Button Width="150"
                            Margin="0,0,20,0"
                            d:Content="开　　始"
                            Command="{Binding TriggerCalculationCommand}"
                            Content="{Binding BtnStartContent}"
                            Style="{StaticResource MaterialDesignRaisedLightButton}" />
                    <Button Width="150" Command="{Binding ResetCalculationCommand}" Content="重　　置" Style="{StaticResource DangerButton}" />
                </StackPanel>
            </Grid>

            <!--  设置内容  -->
            <Grid Grid.Row="1" Margin="20,5" d:Visibility="Collapsed" Visibility="{Binding SettingVisibility}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="150" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!--  薪资类型  -->
                <TextBlock Grid.Row="0"
                           Grid.Column="0"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Text="薪资类型：" />
                <ComboBox Grid.Row="0" Grid.Column="1" ItemsSource="{Binding SalaryTypeOptions}" SelectedItem="{Binding SalaryInfo.SalaryType}" />

                <!--  薪资金额  -->
                <TextBlock Grid.Row="1"
                           Grid.Column="0"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Text="薪资金额(¥)：" />
                <TextBox Grid.Row="1"
                         Grid.Column="1"
                         Margin="0,5"
                         d:Text="10000"
                         Text="{Binding SalaryInfo.SalaryAmount, Converter={StaticResource floatValueConverter}}" />

                <!--  每日工作时长  -->
                <TextBlock Grid.Row="2"
                           Grid.Column="0"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Text="每日工作时长(小时)：" />
                <materialDesign:NumericUpDown Grid.Row="2"
                                              Grid.Column="1"
                                              Margin="0,5"
                                              d:Value="8"
                                              Maximum="24"
                                              Minimum="1"
                                              Value="{Binding SalaryInfo.WorkHoursPerDay, Converter={StaticResource intValueConverter}}" />

                <!--  每周工作天数  -->
                <TextBlock Grid.Row="3"
                           Grid.Column="0"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Text="每周工作天数：" />
                <materialDesign:NumericUpDown Grid.Row="3"
                                              Grid.Column="1"
                                              Margin="0,5"
                                              d:Value="8"
                                              Maximum="7"
                                              Minimum="1"
                                              Value="{Binding SalaryInfo.WorkDaysPerWeek, Converter={StaticResource intValueConverter}}" />

                <!--  上班时间  -->
                <TextBlock Grid.Row="4"
                           Grid.Column="0"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Text="上班起始时间：" />
                <materialDesign:TimePicker Grid.Row="4"
                                           Grid.Column="1"
                                           Margin="0,10"
                                           d:SelectedTime="09:00"
                                           ClockStyle="{StaticResource MaterialDesignClockVertical}"
                                           Is24Hours="True"
                                           Language="zh-cn"
                                           SelectedTime="{Binding SalaryInfo.WorkStartTime}" />

                <!--  按钮  -->
                <StackPanel Grid.Row="5" Grid.ColumnSpan="2">
                    <StackPanel Margin="0,0,0,5" HorizontalAlignment="Center" Orientation="Horizontal">
                        <Button Width="100"
                                Margin="20,0,0,0"
                                Command="{Binding SaveSettingsCommand}"
                                Content="保存"
                                Style="{StaticResource MaterialDesignRaisedLightButton}" />
                        <Button Width="100"
                                Margin="20,0,0,0"
                                Command="{Binding CancelSettingCommand}"
                                Content="取消"
                                Style="{StaticResource NormalButton}" />
                    </StackPanel>
                    <TextBlock FontSize="11" Text="提示：输入薪资信息后，点击【开始】按钮查看实时薪资增长情况。如果填写了上班时间，将从该时间开始计算今日收入。" TextWrapping="Wrap" />
                </StackPanel>
            </Grid>

            <!--  底部  -->
            <Grid Grid.Row="2" HorizontalAlignment="Center" VerticalAlignment="Center">
                <TextBlock Text="@搞钱 | 没有什么比搞钱更重要 (￥_￥)." />
            </Grid>

        </Grid>
        <!--  Snackbar  -->
        <materialDesign:Snackbar x:Name="MySnackbar" Margin="10" VerticalAlignment="Bottom" MessageQueue="{Binding SnackbarMessageQueue}" />
    </Grid>
</Window>
